(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-course-course"],{"26d6":function(t,i,e){"use strict";var a=e("68c3"),n=e.n(a);n.a},"329b":function(t,i,e){"use strict";e.r(i);var a=e("49ab"),n=e("6fb6");for(var o in n)"default"!==o&&function(t){e.d(i,t,(function(){return n[t]}))}(o);var s,u=e("f0c5"),r=Object(u["a"])(n["default"],a["b"],a["c"],!1,null,"3e4e162e",null,!1,a["a"],s);i["default"]=r.exports},"43d8":function(t,i,e){"use strict";e.r(i);var a=e("9000"),n=e.n(a);for(var o in a)"default"!==o&&function(t){e.d(i,t,(function(){return a[t]}))}(o);i["default"]=n.a},"48b5":function(t,i,e){var a=e("24fb");i=a(!1),i.push([t.i,".f-audio-slider[data-v-2a5f337c]{position:relative}.f-audio-slider uni-text[data-v-2a5f337c]{position:absolute;top:%?35?%;font-size:12px}.f-audio-slider .current-time[data-v-2a5f337c]{left:%?30?%}.f-audio-slider .duration[data-v-2a5f337c]{right:%?30?%}.f-audio-btn uni-text[data-v-2a5f337c]:first-child,.f-audio-btn uni-text[data-v-2a5f337c]:last-child{font-size:30px;color:#bbb}.f-audio-btn uni-text[data-v-2a5f337c]:nth-child(2){font-size:50px;color:#5ccc84}",""]),t.exports=i},"49ab":function(t,i,e){"use strict";e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return o})),e.d(i,"a",(function(){return a}));var a={fAudio:e("b328").default,activeBar:e("486c").default,collectBtn:e("007e").default,skeleton:e("f9c2").default,groupWorks:e("a4c0").default,uniCard:e("70ab").default,mpHtml:e("580f").default,mainButton:e("382a").default},n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",[t.detail.isbuy?"audio"==t.detail.type?e("f-audio",{attrs:{poster:t.detail.cover,src:t.detail.content},on:{onProgress:function(i){arguments[0]=i=t.$handleEvent(i),t.onAudioProgressUpdate.apply(void 0,arguments)}}}):"video"==t.detail.type?e("v-uni-video",{staticStyle:{width:"100%",height:"420rpx"},attrs:{src:t.detail.content,controls:!0,poster:t.detail.cover},on:{timeupdate:function(i){arguments[0]=i=t.$handleEvent(i),t.onVideoTimeUpdate.apply(void 0,arguments)}}}):t._e():e("v-uni-view",{staticClass:"position-relative"},[e("v-uni-image",{staticClass:"bg-light",staticStyle:{width:"100%",height:"420rpx"},attrs:{src:t.detail.cover}}),e("v-uni-view",{staticClass:"text-white font-sm p-1",staticStyle:{position:"absolute",right:"20rpx",bottom:"20rpx","background-color":"rgba(0,0,0,0.4)"}},[t._v(t._s(t._f("formatType")(t.detail.type)))])],1),t.activeData&&!t.detail.isbuy?e("active-bar",{attrs:{end_time:t.activeData.data.end_time,price:t.activeData.data.price,t_price:t.detail.price}},["group"==t.activeData.type?e("v-uni-text",[t._v(t._s(t.activeData.data.p_num)+"人拼团")]):e("v-uni-text",[t._v(t._s(t.activeData.data.used_num)+"人已枪/剩"+t._s(t.activeData.data.s_num-t.activeData.data.used_num)+"名")])],1):t._e(),e("v-uni-view",{staticClass:"animate__animated animate__fadeIn animate__faster"},[t.firstLoad?e("v-uni-view",{staticClass:"flex flex-column p-3"},[e("v-uni-text",{staticClass:"mb-1",staticStyle:{"font-size":"38rpx"}},[t._v(t._s(t.detail.title))]),e("v-uni-view",{staticClass:"flex align-center justify-between"},[e("v-uni-text",{staticClass:"font-sm text-light-muted"},[t._v(t._s(t.detail.sub_count)+" 人学过")]),e("collect-btn",{attrs:{isfava:t.detail.isfava,goods_id:t.detail.id,type:"course"},on:{success:function(i){arguments[0]=i=t.$handleEvent(i),t.detail.isfava=i}}})],1),t.detail.isbuy?t._e():e("v-uni-view",{staticClass:"flex mt-2 align-end"},[e("v-uni-text",{staticClass:"text-danger font-lg"},[t._v("￥"+t._s(t.detail.price))]),e("v-uni-text",{staticClass:"font-sm text-light-muted ml-1 text-through"},[t._v("￥"+t._s(t.detail.t_price))])],1)],1):e("v-uni-view",{staticClass:"flex flex-column p-3"},[e("skeleton",{attrs:{width:"600rpx",height:"75rpx",oClass:"mb-2"}}),e("skeleton",{attrs:{width:"150rpx",height:"70rpx"}}),e("v-uni-view",{staticClass:"flex mt-2 align-end"},[e("skeleton",{attrs:{width:"150rpx",height:"70rpx"}}),e("skeleton",{attrs:{width:"150rpx",height:"40rpx",oClass:"ml-1"}})],1)],1),e("v-uni-view",{staticClass:"divider"}),t.detail.isbuy?t._e():e("group-works",{ref:"groupWorks",on:{updateData:function(i){arguments[0]=i=t.$handleEvent(i),t.getData.apply(void 0,arguments)}}}),e("uni-card",{attrs:{title:t.detail.isbuy&&"media"==t.detail.type?"课程内容":"课程简介",isFull:!0}},[e("v-uni-view",{attrs:{id:"media"}},[e("mp-html",{attrs:{content:t.detail.isbuy&&"media"==t.detail.type?t.detail.content:t.detail.try},on:{ready:function(i){arguments[0]=i=t.$handleEvent(i),t.onMediaReady.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"flex justify-center py-3 text-muted"},[t._v("加载中...")])],1)],1)],1),!t.detail.isbuy&&t.firstLoad?[e("v-uni-view",{staticStyle:{height:"75px"}}),e("v-uni-view",{staticClass:"fixed-bottom p-2 border-top bg-white"},[e("main-button",{on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.submit.apply(void 0,arguments)}}},[t._v(t._s(t.btn))])],1)]:t._e()],2)],1)},o=[]},"68c3":function(t,i,e){var a=e("48b5");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=e("4f06").default;n("bbe4d898",a,!0,{sourceMap:!1,shadowMode:!1})},"6fb6":function(t,i,e){"use strict";e.r(i);var a=e("b0b3"),n=e.n(a);for(var o in a)"default"!==o&&function(t){e.d(i,t,(function(){return a[t]}))}(o);i["default"]=n.a},"7fee":function(t,i,e){"use strict";var a;e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return o})),e.d(i,"a",(function(){return a}));var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"bg-light"},[e("v-uni-view",{staticClass:"px-5 pt-5"},[e("v-uni-image",{staticClass:"bg-hover-light",staticStyle:{width:"100%",height:"400rpx","border-radius":"20rpx"},attrs:{src:t.poster,mode:"aspectFill"}})],1),e("v-uni-view",{staticClass:"f-audio-slider mb-5"},[e("v-uni-slider",{attrs:{max:t.duration,value:t.position,activeColor:"#5ccc84","block-color":"#5ccc84","block-size":15},on:{changing:function(i){arguments[0]=i=t.$handleEvent(i),t.onchanging.apply(void 0,arguments)},change:function(i){arguments[0]=i=t.$handleEvent(i),t.onchange.apply(void 0,arguments)}}}),e("v-uni-text",{staticClass:"current-time"},[t._v(t._s(t._f("formatTime")(t.currentTime)))]),e("v-uni-text",{staticClass:"duration"},[t._v(t._s(t._f("formatTime")(t.duration)))])],1),e("v-uni-view",{staticClass:"f-audio-btn flex align-center justify-center pb-5"},[e("v-uni-text",{staticClass:"iconfont icon-ziyuan11",style:t.loopStatus?"color:rgb(92, 204, 132);":"",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.loop()}}}),e("v-uni-text",{staticClass:"iconfont mx-3",class:t.isPlaying?"icon-tianchongxing-":"icon-bofang2",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.play.apply(void 0,arguments)}}}),e("v-uni-text",{staticClass:"iconfont icon-shoucang1"})],1)],1)},o=[]},9e3:function(t,i,e){"use strict";var a=e("4ea4");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=a(e("e5a1")),o={name:"f-audio",props:{src:{type:String,default:""},poster:{type:String,default:""}},filters:{formatTime:function(t){return 0==t?"00:00:00":n.default.formatSeconds(t)}},data:function(){return{_audioContext:null,isPlaying:!1,isPlayEnd:!1,currentTime:0,duration:1,_isChanging:!1,loopStatus:!1}},computed:{position:function(){return this.isPlayEnd?0:this.currentTime}},created:function(){this.createAudio()},beforeDestroy:function(){null!=this._audioContext&&this.isPlaying&&this.stop()},methods:{createAudio:function(){var t=this;this._audioContext=uni.createInnerAudioContext(),this._audioContext.autoplay=!1,this._audioContext.src=this.src,this._audioContext.onPlay((function(){console.log("开始播放")})),this._audioContext.onCanplay((function(){t.duration=t._audioContext.duration})),this._audioContext.onTimeUpdate((function(){t._isChanging||(t.currentTime=t._audioContext.currentTime,t.duration=t._audioContext.duration,t.duration>0&&t.$emit("onProgress",(t.currentTime/t.duration*100).toFixed(2)))})),this._audioContext.onEnded((function(){t.currentTime=0,t.isPlaying=!1,t.isPlayEnd=!1})),this._audioContext.onError((function(){t.isPlaying=!1}))},play:function(){if(this.isPlaying)return this.pause();this.isPlaying=!0,this._audioContext.play(),this.isPlayEnd=!1},pause:function(){this._audioContext.pause(),this.isPlaying=!1},onchange:function(t){this._audioContext.seek(t.detail.value),this._isChanging=!1},onchanging:function(){this._isChanging=!0},stop:function(){this._audioContext.stop(),this.isPlaying=!1},loop:function(){this.loopStatus=!this.loopStatus,this._audioContext.loop=this.loopStatus,this.$toast((this.loopStatus?"开启":"关闭")+"循环")}}};i.default=o},b0b3:function(t,i,e){"use strict";var a=e("4ea4");e("99af"),e("d3b7"),e("e25e"),e("ac1f"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;a(e("e5a1"));var n=uni.getSystemInfoSync().windowHeight,o={filters:{formatType:function(t){var i={media:"图文",audio:"音频",video:"视频"};return i[t]}},data:function(){return{firstLoad:!1,detail:{id:0,title:"",cover:"",try:"",price:"",t_price:"",type:"media",sub_count:0,content:"",isbuy:!1,isfava:!1},column_id:0,scrollTop:0,mediaHeight:0,progress:0,group_id:0,activeData:null,flashsale_id:0}},computed:{btn:function(){return this.detail.flashsale?"立即秒杀￥"+this.detail.flashsale.price:this.detail.group?"立即拼团￥"+this.detail.group.price:0==this.detail.price?"立即学习":"立即订购￥"+this.detail.price}},onPageScroll:function(t){this.detail.isbuy&&"media"==this.detail.type&&t.scrollTop>this.scrollTop&&(this.scrollTop=t.scrollTop,this.sumMediaProgress())},onLoad:function(t){if(this.detail.id=t.id,!this.detail.id)return this.$toast("非法参数"),void setTimeout((function(){uni.navigateBack({delta:1})}),700);t.column_id&&(this.column_id=t.column_id),t.group_id&&(this.group_id=t.group_id),t.flashsale_id&&(this.flashsale_id=t.flashsale_id)},onShow:function(){this.getData()},beforeDestroy:function(){this.updateUserHistory()},methods:{submit:function(){var t=this;if(this.group_id)return uni.showLoading({title:"发起拼团中...",mask:!0}),void this.$api.createOrder({group_id:this.group_id},"group").then((function(t){uni.navigateTo({url:"../h5pay/h5pay?no="+t.no})})).catch((function(t){console.log(t)})).finally((function(){uni.hideLoading()}));if(0==this.detail.price)return uni.showLoading({title:"加载中...",mask:!1}),void this.$api.learn({goods_id:this.detail.id,type:"course"}).then((function(i){t.getData()})).finally((function(){uni.hideLoading()}));var i="course",e=this.detail.id;this.detail.flashsale&&(i="flashsale",e=this.flashsale_id),this.authJump("../create-order/create-order?id=".concat(e,"&type=").concat(i))},onAudioProgressUpdate:function(t){this.progress=t},onVideoTimeUpdate:function(t){var i=t.detail,e=i.currentTime,a=i.duration;a>0&&(this.progress=(e/a*100).toFixed(2))},updateUserHistory:function(){if(this.detail.isbuy){var t={};t=0==this.column_id?{id:this.detail.id,type:"course",progress:this.progress}:{id:this.column_id,type:"column",detail_id:this.detail.id},this.$api.updateUserHistory(t)}},onMediaReady:function(){var t=this,i=uni.createSelectorQuery().in(this);i.select("#media").boundingClientRect((function(i){t.mediaHeight=parseInt(i.height),t.sumMediaProgress()})).exec()},sumMediaProgress:function(){this.mediaHeight>0&&(this.progress=((this.scrollTop+n)/this.mediaHeight*100).toFixed(2),this.progress=this.progress>100?100:this.progress,console.log(this.progress))},getData:function(){var t=this;this.$api.readCourse({id:this.detail.id,column_id:this.column_id,group_id:this.group_id,flashsale_id:this.flashsale_id}).then((function(i){t.detail=i,i.group&&(t.activeData={type:"group",data:i.group},t.$refs.groupWorks.init(t.group_id)),i.flashsale&&(t.activeData={type:"flashsale",data:i.flashsale}),console.log(t.detail),uni.setNavigationBarTitle({title:t.detail.title})})).catch((function(t){"该记录不存在"==t&&setTimeout((function(){uni.navigateBack({delta:1})}),700)})).finally((function(){t.firstLoad=!0}))}}};i.default=o},b328:function(t,i,e){"use strict";e.r(i);var a=e("7fee"),n=e("43d8");for(var o in n)"default"!==o&&function(t){e.d(i,t,(function(){return n[t]}))}(o);e("26d6");var s,u=e("f0c5"),r=Object(u["a"])(n["default"],a["b"],a["c"],!1,null,"2a5f337c",null,!1,a["a"],s);i["default"]=r.exports}}]);